{"version":3,"file":"main.js","mappings":"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","sources":["webpack://govuk-prototype-kit/./node_modules/@nationalarchives/tdr-components/dist/index.js","webpack://govuk-prototype-kit/./app/assets/typescript/folder-upload.ts","webpack://govuk-prototype-kit/webpack/bootstrap","webpack://govuk-prototype-kit/webpack/runtime/compat get default export","webpack://govuk-prototype-kit/webpack/runtime/define property getters","webpack://govuk-prototype-kit/webpack/runtime/hasOwnProperty shorthand","webpack://govuk-prototype-kit/webpack/runtime/make namespace object","webpack://govuk-prototype-kit/./app/assets/typescript/main.ts"],"sourcesContent":["!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(self,(()=>(()=>{\"use strict\";var e={806:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.ButtonDisabled=void 0;t.ButtonDisabled=function(e){var t=this;this.initialiseListeners=function(){t.button.addEventListener(\"click\",t.handleClick)},this.handleClick=function(e){\"true\"===t.button.getAttribute(\"aria-disabled\")&&e.preventDefault()},this.button=e}},558:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.MultiSelectSearch=void 0;t.MultiSelectSearch=function(e){var t,n,r,i,l,o=this;this.timeoutId=null,this.initialise=function(){var e;null===(e=o.filter)||void 0===e||e.addEventListener(\"keyup\",(function(e){e instanceof KeyboardEvent&&o.handleKeyUp(e)})),o.list.addEventListener(\"change\",o.processInputChange);var t=o.getSelectedItems().length,n=o.getVisibleItems().length;null!==o.selectedCount&&o.updateSelectedCount(o.selectedCount,t),null!==o.filterCount&&o.updateFilteredCount(o.filterCount,t,n)},this.handleKeyUp=function(e){e.stopPropagation(),\"Enter\"!==e.key?(clearTimeout(Number(o.timeoutId)),o.timeoutId=setTimeout(o.processKeyUpTimeout,300)):e.preventDefault()},this.cleanString=function(e){return(e=(e=(e=e.replace(/&/g,\"and\")).replace(/[’',:–-]/g,\"\")).replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\")).trim().replace(/\\s\\s+/g,\" \").toLowerCase()},this.filterItems=function(e,t){var n=o.cleanString(e),r=o.getSelectedItems(),i=0;for(i=0;i<t.length;i++)-1!==o.labels[i].search(n)&&r.push(i);for(i=0;i<t.length;i++)o.list.children[i].classList.add(\"is-hidden\");for(i=0;i<r.length;i++)o.list.children[r[i]].classList.remove(\"is-hidden\")},this.updateSelectedCount=function(e,t){e.textContent=\"\".concat(t,\" selected\")},this.updateFilteredCount=function(e,t,n){var r=\"\".concat(1===n?o.config.copySingle:o.config.copyMultiple,\" displayed\"),i=\"\".concat(1===t?o.config.copySingle:o.config.copyMultiple,\" selected\"),l=\"\".concat(n,\" \").concat(r,\", \").concat(t,\" \").concat(i);e.innerHTML=l},this.setupHeight=function(){if(null!==o.container){var e=o.container.clientHeight,t=o.getAbsoluteHeight(o.list);if(t<e+50)o.container.style.height=t+\"px\";else{var n=o.getInViewport(o.list.children).pop();if(void 0!==n){var r=(null==n?void 0:n.offsetTop)+n.clientHeight/1.5;o.container.style.height=r+\"px\"}}}},this.getAbsoluteHeight=function(e){var t=window.getComputedStyle(e),n=parseFloat(t.marginTop)+parseFloat(t.marginBottom);return Math.ceil(e.offsetHeight+n)},this.isInViewport=function(e){if(null===o.container)return!1;var t=o.container.clientHeight,n=o.container.getBoundingClientRect().top;return e.getBoundingClientRect().top-n<t},this.getInViewport=function(e){return Array.from(e).filter(o.isInViewport)},this.getSelectedItems=function(){var e=[];return Array.from(o.inputs).forEach((function(t,n){t.checked&&e.push(n)})),e},this.getVisibleItems=function(){for(var e=[],t=0;t<o.list.children.length;t++)o.list.children[t].classList.contains(\"is-hidden\")||e.push(t);return e},this.processKeyUpTimeout=function(e){if(null!==o.filter){o.filterItems(o.filter.value,o.list.children);var t=o.getSelectedItems().length,n=o.getVisibleItems().length;null!==o.filterCount&&o.updateFilteredCount(o.filterCount,t,n)}},this.processInputChange=function(e){var t=o.getSelectedItems().length,n=o.getVisibleItems().length;null!==o.selectedCount&&o.updateSelectedCount(o.selectedCount,t),null!==o.filterCount&&o.updateFilteredCount(o.filterCount,t,n)},this.container=e.querySelector(\".js-container\"),this.list=e.querySelector(\"ul\"),this.inputs=e.querySelectorAll(\"input[type=checkbox]\"),this.filter=e.querySelector(\"input[type=text]\"),this.filterCount=e.querySelector(\".js-filter-count\"),this.selectedCount=e.querySelector(\".js-selected-count\"),this.config={copySingle:null!==(n=null===(t=e.dataset.copySingle)||void 0===t?void 0:t.trim())&&void 0!==n?n:\"\",copyMultiple:null!==(i=null===(r=e.dataset.copyMultiple)||void 0===r?void 0:r.trim())&&void 0!==i?i:\"\"},this.labels=[];for(var u=0;u<this.list.children.length;u++)this.labels.push(this.cleanString(null!==(l=this.list.children[u].textContent)&&void 0!==l?l:\"\"));e.setAttribute(\"data-module-active\",\"true\")}},922:(e,t)=>{var n,r;Object.defineProperty(t,\"__esModule\",{value:!0}),t.NestedNavigation=t.InputTypeHtmlAttrValue=t.InputType=void 0,function(e){e.radios=\"radios\",e.checkboxes=\"checkboxes\"}(n||(t.InputType=n={})),function(e){e.radios=\"radio\",e.checkboxes=\"checkbox\"}(r||(t.InputTypeHtmlAttrValue=r={}));t.NestedNavigation=function(e){var t=this;this.rememberExpanded=!1,this.getCurrentFocus=function(){return t.currentFocus},this.getTree=function(){return t.tree},this.initialiseFormListeners=function(e){null!==t.tree&&t.tree.addEventListener(\"keydown\",(function(n){n instanceof KeyboardEvent&&t.handleKeyDown(n,e)}));var r=t.tree.querySelectorAll(\".js-tree__expander--\".concat(n.checkboxes));Array.from(r).forEach((function(n,r,i){n.addEventListener(\"click\",(function(n){var r=n.currentTarget;r.id.includes(\"expander\")||(r=r.previousElementSibling),t.handleExpanders(r,e),n.preventDefault(),n.stopPropagation()}))})),t.tree.querySelectorAll('[role=\"group\"]').forEach((function(n,r,i){n.id.includes(e)&&t.updateExpanded(n,e)})),t.tree.querySelectorAll(\"[role=treeitem]\").forEach((function(r,i,l){e===n.radios&&r.id.includes(\"folder\")||r.id.includes(e)&&r.addEventListener(\"click\",(function(n){n.currentTarget instanceof HTMLLIElement&&!(n.target instanceof HTMLLabelElement)&&(t.setSelected(n.currentTarget,e),t.setFocusToItem(n.currentTarget)),n.stopImmediatePropagation()}))})),t.removeFocusFromInputs(e);var i=t.tree.querySelector(\"[role=treeitem]\");null!==i&&(i.tabIndex=0,t.currentFocus=i)},this.removeFocusFromInputs=function(e){t.tree.querySelectorAll(\"input[type=\".concat(r[e],\"]\")).forEach((function(e){e.tabIndex=-1,e.setAttribute(\"aria-hidden\",\"true\")}))},this.updateFocus=function(e){null!=e?t.setFocusToItem(e):t.setFocusToItem(t.tree.firstElementChild)},this.updateExpanded=function(e,n){var r=e.getAttribute(\"id\");null!==r&&(t.getExpanded(n).includes(r.replace(\"node-group\",\"list\"))||e.parentNode.setAttribute(\"aria-expanded\",\"false\"))},this.getExpanded=function(e){var t=localStorage.getItem(\"\".concat(e,\"-state\"));return null!==t?JSON.parse(t).expanded:[]},this.allChildren=function(e,n){for(var r=e.children.length-1;r>=0;r--){var i=e.children.item(r);null!==i&&(\"LI\"===i.nodeName&&n.push(i),Array.from(i.children).filter((function(e){return\"UL\"===e.nodeName})).forEach((function(e){return t.allChildren(e,n)})))}return n},this.toggleNode=function(e,n,r){var i=t.getExpanded(r);\"false\"===e.getAttribute(\"aria-expanded\")?(e.setAttribute(\"aria-expanded\",\"true\"),i.push(n)):(e.setAttribute(\"aria-expanded\",\"false\"),i.splice(i.indexOf(n))),t.rememberExpanded&&localStorage.setItem(\"\".concat(r,\"-state\"),JSON.stringify({expanded:i}))},this.displaySelected=function(e){var n;t.fileSelected=null!==(n=t.fileSelected)&&void 0!==n?n:document.getElementById(\"\".concat(t.tree.id,\"-selected\")),e=\"\"===e?\"No file selected\":e,null!==t.fileSelected&&(t.fileSelected.textContent=e)},this.setSelected=function(e,r){var i,l,o,u;if(e.querySelectorAll(\"ul\").length>0&&r===n.radios)t.toggleNode(e,e.id,n.radios);else{var s=\"true\"===e.getAttribute(\"aria-selected\");e.setAttribute(\"aria-selected\",s?\"false\":\"true\");var c=e.querySelector(\"input\");null!==c&&(c.checked=!s);var a=e.querySelector(\"label\");if(null!==(null===(i=null==a?void 0:a.firstChild)||void 0===i?void 0:i.textContent)?t.displaySelected(s?\"\":null!==(u=null===(o=null===(l=null==a?void 0:a.firstChild)||void 0===l?void 0:l.textContent)||void 0===o?void 0:o.trim())&&void 0!==u?u:\"\"):t.displaySelected(\"\"),r===n.checkboxes&&e.setAttribute(\"aria-checked\",s?\"false\":\"true\"),r!==n.radios||s||t.tree.querySelectorAll(\"li[aria-selected=true]\").forEach((function(t){if(t.id!==e.id){t.setAttribute(\"aria-selected\",\"false\");var n=t.querySelector(\"input\");null!==n&&(n.checked=!1)}})),r===n.checkboxes){if(e.querySelectorAll(\"ul\").length>0){var d=document.querySelector(\"#\".concat(r,\"-node-group-\").concat(e.id.replace(\"\".concat(r,\"-list-\"),\"\")));if(null!=d)for(var f=0,p=t.allChildren(d,[]);f<p.length;f++){var h=p[f];h.setAttribute(\"aria-selected\",s?\"false\":\"true\"),h.setAttribute(\"aria-checked\",s?\"false\":\"true\");var v=h.getElementsByTagName(\"input\")[0];null!==v&&(v.checked=!s)}}var g=e.closest(\"[role=group]\");t.setParentState(g)}}},this.setParentState=function(e){var n;if(null!==e){var r=t.allChildren(e,[]),i=r.filter((function(e){return\"true\"===e.getAttribute(\"aria-selected\")})).length,l=e.parentNode;if(null!==l&&\"tree\"!==e.getAttribute(\"role\")){i>0&&i<r.length&&l.setAttribute(\"aria-checked\",\"mixed\"),i===r.length&&(l.setAttribute(\"aria-checked\",\"true\"),l.setAttribute(\"aria-selected\",\"true\")),0===i&&(l.setAttribute(\"aria-selected\",\"false\"),l.setAttribute(\"aria-checked\",\"false\"));var o=null===(n=e.parentElement)||void 0===n?void 0:n.closest(\"[role=group]\");null!=o&&t.setParentState(o)}}},this.setFocusToItem=function(e){Array.from(t.treeItems).forEach((function(e){e.tabIndex=-1})),null!=e&&(e.tabIndex=0,e.focus(),t.currentFocus=e)},this.setFocusToLastExpandedChild=function(e){if(null!==e&&\"true\"===e.getAttribute(\"aria-expanded\")){var n=e.querySelector(\":scope > ul > li:last-child\");t.setFocusToLastExpandedChild(n)}else null!==e&&t.setFocusToItem(e)},this.setFocusToPreviousItem=function(e){if(null!==e){var n=e.closest(\"li\");null!==n&&(null!==n.previousElementSibling?t.setFocusToLastExpandedChild(n.previousElementSibling):null!==n.parentElement&&t.setFocusToItem(n.parentElement.closest(\"li\")))}},this.setFocusToNextParent=function(e){if(\"tree\"!==e.getAttribute(\"role\")){var n=e.closest(\"li\");null!==n&&(null!==n.nextElementSibling?t.setFocusToItem(n.nextElementSibling):t.setFocusToNextParent(n.parentElement))}},this.setFocusToNextItem=function(e){if(null!=e){var n=e.closest(\"li\");if(null!==n)if(\"true\"===n.getAttribute(\"aria-expanded\")){var r=n.querySelector(\"ul > li\");null!==r&&t.setFocusToItem(r)}else null!==n.nextElementSibling?t.setFocusToItem(n.nextElementSibling):null!==n.parentElement&&t.setFocusToNextParent(n.parentElement)}},this.handleKeyDown=function(e,n){var r=!1;switch(e.key){case\"Enter\":case\" \":null!==t.currentFocus&&(t.setSelected(t.currentFocus,n),t.setFocusToItem(t.currentFocus)),r=!0;break;case\"ArrowUp\":t.setFocusToPreviousItem(t.currentFocus),r=!0;break;case\"ArrowDown\":t.setFocusToNextItem(t.currentFocus),r=!0;break;case\"ArrowRight\":t.processArrowRightEvent(e,n),r=!0;break;case\"ArrowLeft\":t.processArrowLeftEvent(e,n),r=!0;break;case\"Home\":t.setFocusToItem(t.tree.firstElementChild),r=!0;break;case\"End\":t.processEndEvent(e),r=!0}r&&(e.preventDefault(),e.stopPropagation())},this.processEndEvent=function(e){for(var n,r=t.tree.lastElementChild;\"true\"===(null==r?void 0:r.getAttribute(\"aria-expanded\"));)r=null===(n=r.lastElementChild)||void 0===n?void 0:n.lastElementChild;t.setFocusToItem(r),e.preventDefault()},this.processArrowLeftEvent=function(e,n){var r,i,l;if(\"true\"===(null===(r=t.currentFocus)||void 0===r?void 0:r.getAttribute(\"aria-expanded\")))t.toggleNode(t.currentFocus,t.currentFocus.id,n);else if(\"tree\"!==(null===(i=t.currentFocus)||void 0===i?void 0:i.getAttribute(\"role\"))){var o=null===(l=t.currentFocus)||void 0===l?void 0:l.parentElement;null!=o&&t.setFocusToItem(o.closest(\"li\"))}e.preventDefault()},this.processArrowRightEvent=function(e,n){var r,i;\"false\"===(null===(r=t.currentFocus)||void 0===r?void 0:r.getAttribute(\"aria-expanded\"))?t.toggleNode(t.currentFocus,t.currentFocus.id,n):\"true\"===(null===(i=t.currentFocus)||void 0===i?void 0:i.getAttribute(\"aria-expanded\"))&&t.setFocusToNextItem(t.currentFocus),e.preventDefault()},this.handleExpanders=function(e,n){var r=e.id.replace(\"expander-\",\"node-group-\"),i=t.tree.querySelector(\"#\".concat(r));if(null!==i){var l=i.parentNode;null!=l&&(t.toggleNode(l,e.id.replace(\"expander-\",\"\"),n),t.setFocusToItem(l))}},this.tree=e,this.treeItems=this.tree.querySelectorAll(\"[role=treeitem]\"),this.currentFocus=null,this.rememberExpanded=\"true\"===e.dataset.rememberExpanded}},976:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!(\"get\"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)\"default\"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,\"__esModule\",{value:!0}),t.ButtonDisabled=t.MultiSelectSearch=void 0,i(n(922),t);var l=n(558);Object.defineProperty(t,\"MultiSelectSearch\",{enumerable:!0,get:function(){return l.MultiSelectSearch}});var o=n(806);Object.defineProperty(t,\"ButtonDisabled\",{enumerable:!0,get:function(){return o.ButtonDisabled}})}},t={};return function n(r){var i=t[r];if(void 0!==i)return i.exports;var l=t[r]={exports:{}};return e[r].call(l.exports,l,l.exports,n),l.exports}(976)})()));","interface IFileWithPath {\n  file: File;\n  path: string;\n}\ninterface FileWithRelativePath extends File {\n  webkitRelativePath: string;\n}\n\ntype IEntryWithPath = IFileWithPath | IDirectoryWithPath;\ntype IDirectoryWithPath = Pick<IFileWithPath, \"path\">;\n\nfunction isFile(entry: IEntryWithPath): entry is IFileWithPath {\n  return (entry as IFileWithPath).file !== undefined;\n}\n\nfunction isDirectory(entry: IEntryWithPath): entry is IFileWithPath {\n  return !isFile(entry);\n}\ninterface IReader {\n  readEntries: (callbackFunction: (entry: IWebkitEntry[]) => void) => void;\n}\n\ninterface IWebkitEntry extends DataTransferItem {\n  createReader: () => IReader;\n  isFile: boolean;\n  isDirectory: boolean;\n  fullPath: string;\n  name?: string;\n  file: (success: (file: File) => void) => void;\n}\n\nexport class FolderUpload {\n  private readonly dropzone: HTMLElement;\n  private readonly itemRetriever: HTMLInputElement;\n  private readonly selected: HTMLElement;\n  private readonly selectedFolderName: HTMLElement;\n  private readonly selectedNumberOfFiles: HTMLElement;\n\n  constructor(root: HTMLElement) {\n    this.itemRetriever = root.querySelector(\".js-drag-and-drop-input\")!;\n    this.dropzone = root.querySelector(\".js-drag-and-drop-zone\")!;\n    this.selected = root.querySelector(\".js-drag-and-drop-selected\")!;\n  }\n\n  initialise: () => void = () => {\n    this.addDropzoneHighlighter();\n    this.addButtonHighlighter();\n    this.addFolderListener();\n  };\n\n  addFolderListener: () => void = () => {\n    this.dropzone.addEventListener(\"drop\", this.handleDroppedItems);\n    this.itemRetriever.addEventListener(\"change\", this.handleSelectedItems);\n  };\n\n  addDropzoneHighlighter: () => void = () => {\n    this.dropzone.addEventListener(\"dragover\", (ev) => {\n      ev.preventDefault();\n      this.dropzone.classList.add(\"drag-and-drop__dropzone--dragover\");\n    });\n\n    this.dropzone.addEventListener(\"dragleave\", () => {\n      this.removeDragover();\n    });\n  };\n\n  addButtonHighlighter: () => void = () => {\n    const itemRetrieverLabel: HTMLLabelElement = this.itemRetriever.labels![0];\n    this.itemRetriever.addEventListener(\"focus\", () => {\n      itemRetrieverLabel.classList.add(\"drag-and-drop__button--highlight\");\n    });\n\n    this.itemRetriever.addEventListener(\"blur\", () => {\n      itemRetrieverLabel.classList.remove(\"drag-and-drop__button--highlight\");\n    });\n  };\n\n  removeDragover: () => void = () => {\n    this.dropzone.classList.remove(\"drag-and-drop__dropzone--dragover\");\n  };\n\n  private getParentFolderName(folder: IEntryWithPath[]) {\n    const firstItem: IEntryWithPath = folder.filter((f) => isFile(f))[0];\n    const relativePath: string = firstItem.path;\n    const splitPath: string[] = relativePath.split(\"/\");\n    return splitPath[0];\n  }\n\n  handleDroppedItems: (ev: DragEvent) => Promise<any> = async (ev) => {\n    ev.preventDefault();\n    const items: DataTransferItemList = ev.dataTransfer?.items!;\n\n    const droppedItem: DataTransferItem | null = items[0];\n    const webkitEntry = droppedItem.webkitGetAsEntry();\n\n    const filesAndFolders: IDirectoryWithPath[] = await this.getAllFiles(\n      webkitEntry as unknown as IWebkitEntry,\n      []\n    );\n\n    this.displaySelectionSuccessMessage(\n      webkitEntry!.name,\n      filesAndFolders.filter((f) => isFile(f)).length\n    );\n  };\n\n  handleSelectedItems: (ev: Event) => any = async (ev) => {\n    ev.preventDefault();\n    const form: HTMLFormElement | null = this.itemRetriever.closest(\"form\");\n\n    const selectedFiles = this.convertFilesToIfilesWithPath(form!.files!.files);\n    const parentFolder = this.getParentFolderName(selectedFiles);\n\n    this.displaySelectionSuccessMessage(\n      parentFolder,\n      selectedFiles.filter((f) => isFile(f)).length\n    );\n  };\n\n  getEntryBatch: (reader: IReader) => Promise<IWebkitEntry[]> = (reader) => {\n    return new Promise<IWebkitEntry[]>((resolve) => {\n      reader.readEntries((entries) => resolve(entries));\n    });\n  };\n\n  getFileFromEntry: (entry: IWebkitEntry) => Promise<IFileWithPath> = (\n    entry\n  ) => {\n    return new Promise<IFileWithPath>((resolve) => {\n      entry.file((file) =>\n        resolve({\n          file,\n          path: entry.fullPath,\n        })\n      );\n    });\n  };\n\n  getEntriesFromReader: (reader: IReader) => Promise<IWebkitEntry[]> = async (\n    reader\n  ) => {\n    let allEntries: IWebkitEntry[] = [];\n\n    let nextBatch = await this.getEntryBatch(reader);\n\n    while (nextBatch.length > 0) {\n      allEntries = allEntries.concat(nextBatch);\n      nextBatch = await this.getEntryBatch(reader);\n    }\n\n    return allEntries;\n  };\n\n  getAllFiles: (\n    entry: IWebkitEntry | null,\n    fileInfoInput: IEntryWithPath[]\n  ) => Promise<IEntryWithPath[]> = async (entry, fileInfoInput) => {\n    const reader: IReader = entry!.createReader();\n    const entries: IWebkitEntry[] = await this.getEntriesFromReader(reader);\n    if (entry!.isDirectory && entries.length === 0) {\n      fileInfoInput.push({ path: entry!.fullPath });\n    }\n    for (const entry of entries) {\n      if (entry.isDirectory) {\n        await this.getAllFiles(entry, fileInfoInput);\n      } else {\n        const file: IFileWithPath = await this.getFileFromEntry(entry);\n        fileInfoInput.push(file);\n      }\n    }\n    return fileInfoInput;\n  };\n\n  private convertFilesToIfilesWithPath(files: File[]): IFileWithPath[] {\n    return [...files].map((file) => ({\n      file,\n      path: (file as FileWithRelativePath).webkitRelativePath,\n    }));\n  }\n\n  displaySelectionSuccessMessage: (\n    folderName: string,\n    numberOfFiles: number\n  ) => void = (folderName, numberOfFiles) => {\n    this.removeDragover();\n    this.itemRetriever.blur();\n    this.selected.classList.remove(\"govuk-visually-hidden\");\n\n    let selectedContentFragment = document.createRange()\n      .createContextualFragment(this.selected.innerHTML);\n\n    selectedContentFragment.querySelectorAll(\n      \".js-drag-and-drop-folder-name\"\n    ).forEach((el)=>{\n      el.textContent = folderName;\n    })\n\n    selectedContentFragment.querySelector(\n      \".js-drag-and-drop-no-of-files\"\n    )!.textContent = numberOfFiles.toString();\n\n    this.selected.innerHTML = \"\";\n    this.selected.appendChild(selectedContentFragment)\n  };\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { MultiSelectSearch } from \"@nationalarchives/tdr-components\";\nimport { NestedNavigation, InputType } from \"@nationalarchives/tdr-components\";\nimport { FolderUpload } from \"./folder-upload\";\n\nwindow.addEventListener(\"DOMContentLoaded\", (event) => {\n  /**\n   * Multi-select search.\n   */\n  const multiSelects = document.querySelectorAll(\n    \"[data-module=multi-select-search]\"\n  );\n\n  multiSelects.forEach((ms) => {\n    const multiSelectSearch = new MultiSelectSearch(ms as HTMLElement);\n    multiSelectSearch.initialise();\n  });\n\n  /**\n   * Nested Navigation\n   */\n  const tree = document.querySelector(\"[role=tree]\");\n  if (tree != null) {\n    const nestedNavigation = new NestedNavigation(tree as HTMLUListElement);\n    nestedNavigation.initialiseFormListeners(InputType.radios);\n  }\n\n  const folderUpload: HTMLElement = document.querySelector(\n    \"[data-tdr-module=folder-upload]\"\n  );\n  if (folderUpload) {\n    const fu: FolderUpload = new FolderUpload(folderUpload);\n    fu.initialise();\n  }\n});\n"],"names":[],"sourceRoot":""}