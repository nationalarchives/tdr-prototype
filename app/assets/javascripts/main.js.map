{"version":3,"file":"main.js","mappings":"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","sources":["webpack://govuk-prototype-kit/./node_modules/@nationalarchives/tdr-components/dist/index.js","webpack://govuk-prototype-kit/webpack/bootstrap","webpack://govuk-prototype-kit/webpack/runtime/compat get default export","webpack://govuk-prototype-kit/webpack/runtime/define property getters","webpack://govuk-prototype-kit/webpack/runtime/hasOwnProperty shorthand","webpack://govuk-prototype-kit/webpack/runtime/make namespace object","webpack://govuk-prototype-kit/./app/assets/typescript/main.ts"],"sourcesContent":["!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var s=t();for(var i in s)(\"object\"==typeof exports?exports:e)[i]=s[i]}}(self,(()=>(()=>{\"use strict\";var e,t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},s={};t.r(s),t.d(s,{InputType:()=>e,MultiSelectSearch:()=>r,NestedNavigation:()=>i}),function(e){e.radios=\"radios\",e.checkboxes=\"checkboxes\"}(e||(e={}));class i{constructor(t){this.getCurrentFocus=()=>this.currentFocus,this.getTree=()=>this.tree,this.initialiseFormListeners=t=>{null!==this.tree&&this.tree.addEventListener(\"keydown\",(e=>{e instanceof KeyboardEvent&&this.handleKeyDown(e,t)}));const s=Array.from(this.tree.querySelectorAll(`.js-${t}-directory`)),i=this.tree.querySelectorAll(`.js-tree__expander--${t}`);[...s,...Array.from(i)].forEach(((e,s,i)=>{e.addEventListener(\"click\",(e=>{let s=e.currentTarget;!1===s.id.includes(\"expander\")&&(s=s.previousElementSibling),this.handleExpanders(s,t),e.preventDefault(),e.stopPropagation()}))})),this.tree.querySelectorAll('[role=\"group\"]').forEach(((e,s,i)=>{e.id.includes(t)&&this.updateExpanded(e,t)})),this.tree.querySelectorAll(\"[role=treeitem]\").forEach(((s,i,r)=>{t==e.radios&&!0===s.id.includes(\"folder\")||s.id.includes(t)&&s.addEventListener(\"click\",(e=>{e.currentTarget instanceof HTMLLIElement&&(this.setSelected(e.currentTarget,t),this.setFocusToItem(e.currentTarget)),e.stopImmediatePropagation()}))}));const r=this.tree.querySelector(\"[role=treeitem]\");r&&(r.tabIndex=0,this.currentFocus=r)},this.updateFocus=e=>{null!=e?this.setFocusToItem(e):this.setFocusToItem(this.tree.firstElementChild)},this.updateExpanded=(e,t)=>{const s=e.getAttribute(\"id\");null!==s&&(this.getExpanded(t).includes(s.replace(\"node-group\",\"list\"))||e.parentNode.setAttribute(\"aria-expanded\",\"false\"))},this.getExpanded=e=>{const t=localStorage.getItem(`${e}-state`);return null!==t?JSON.parse(t).expanded:[]},this.allChildren=(e,t)=>{for(let s=e.children.length-1;s>=0;s--){const i=e.children.item(s);null!==i&&(\"LI\"===i.nodeName&&t.push(i),Array.from(i.children).filter((e=>\"UL\"===e.nodeName)).forEach((e=>this.allChildren(e,t))))}return t},this.toggleNode=(e,t,s)=>{const i=this.getExpanded(s);\"false\"===e.getAttribute(\"aria-expanded\")?(e.setAttribute(\"aria-expanded\",\"true\"),i.push(t)):(e.setAttribute(\"aria-expanded\",\"false\"),i.splice(i.indexOf(t))),localStorage.setItem(`${s}-state`,JSON.stringify({expanded:i}))},this.setSelected=(t,s)=>{if(null==t||t.id.includes(\"folder\")&&s==e.radios)return null;const i=\"true\"===t.getAttribute(\"aria-selected\");if(t.setAttribute(\"aria-selected\",i?\"false\":\"true\"),t.setAttribute(\"aria-checked\",i?\"false\":\"true\"),s!==e.radios||i){if(t.hasAttribute(\"aria-expanded\")){const e=document.querySelector(`#${s}-node-group-${t.id.replace(`${s}-list-`,\"\")}`);if(null!=e){const t=this.allChildren(e,[]);for(const e of t)e.setAttribute(\"aria-selected\",i?\"false\":\"true\"),e.setAttribute(\"aria-checked\",i?\"false\":\"true\")}}const e=t.closest(\"[role=group]\");this.setParentState(e)}else this.tree.querySelectorAll(\"li[aria-selected=true]\").forEach((e=>{e.id!==t.id&&(e.setAttribute(\"aria-selected\",\"false\"),e.setAttribute(\"aria-checked\",\"false\"))}))},this.setParentState=e=>{var t;if(null!==e){const s=this.allChildren(e,[]),i=s.filter((e=>\"true\"===e.getAttribute(\"aria-selected\"))).length,r=e.parentNode;if(null!==r&&\"tree\"!==e.getAttribute(\"role\")){i>0&&i<s.length&&r.setAttribute(\"aria-checked\",\"mixed\"),i===s.length&&(r.setAttribute(\"aria-checked\",\"true\"),r.setAttribute(\"aria-selected\",\"true\")),0===i&&(r.setAttribute(\"aria-selected\",\"false\"),r.setAttribute(\"aria-checked\",\"false\"));const l=null===(t=e.parentElement)||void 0===t?void 0:t.closest(\"[role=group]\");null!=l&&this.setParentState(l)}}},this.setFocusToItem=e=>{Array.from(this.treeItems).forEach((e=>{e.tabIndex=-1})),null!=e&&(e.tabIndex=0,e.focus(),this.currentFocus=e)},this.setFocusToLastExpandedChild=e=>{if(e&&\"true\"===e.getAttribute(\"aria-expanded\")){const t=e.querySelector(\":scope > ul > li:last-child\");this.setFocusToLastExpandedChild(t)}else e&&this.setFocusToItem(e)},this.setFocusToPreviousItem=e=>{if(null!=e){const t=e.closest(\"li\");null!=(null==t?void 0:t.previousElementSibling)?this.setFocusToLastExpandedChild(t.previousElementSibling):null!=(null==t?void 0:t.parentElement)&&this.setFocusToItem(t.parentElement.closest(\"li\"))}},this.setFocusToNextParent=e=>{if(\"tree\"!=e.getAttribute(\"role\")){const t=e.closest(\"li\");null!=(null==t?void 0:t.nextElementSibling)?this.setFocusToItem(t.nextElementSibling):this.setFocusToNextParent(t.parentElement)}},this.setFocusToNextItem=e=>{if(null!=e){const t=e.closest(\"li\");if(null!==t)if(\"true\"===t.getAttribute(\"aria-expanded\")){const e=t.querySelector(\"ul > li\");null!==e&&this.setFocusToItem(e)}else null!==t.nextElementSibling?this.setFocusToItem(t.nextElementSibling):null!==t.parentElement&&this.setFocusToNextParent(t.parentElement)}},this.handleKeyDown=(e,t)=>{switch(e.key){case\"Enter\":case\" \":this.setSelected(this.currentFocus,t),e.preventDefault();break;case\"ArrowUp\":this.setFocusToPreviousItem(this.currentFocus),e.preventDefault();break;case\"ArrowDown\":this.setFocusToNextItem(this.currentFocus),e.preventDefault();break;case\"ArrowRight\":this.processArrowRightEvent(e,t);break;case\"ArrowLeft\":this.processArrowLeftEvent(e,t);break;case\"Home\":this.setFocusToItem(this.tree.firstElementChild),e.preventDefault();break;case\"End\":this.processEndEvent(e)}},this.processEndEvent=e=>{var t;let s=this.tree.lastElementChild;for(;\"true\"===(null==s?void 0:s.getAttribute(\"aria-expanded\"));)s=null===(t=s.lastElementChild)||void 0===t?void 0:t.lastElementChild;this.setFocusToItem(s),e.preventDefault()},this.processArrowLeftEvent=(e,t)=>{var s,i,r;if(\"true\"===(null===(s=this.currentFocus)||void 0===s?void 0:s.getAttribute(\"aria-expanded\")))this.toggleNode(this.currentFocus,this.currentFocus.id,t);else if(\"tree\"!==(null===(i=this.currentFocus)||void 0===i?void 0:i.getAttribute(\"role\"))){const e=null===(r=this.currentFocus)||void 0===r?void 0:r.parentElement;null!=e&&this.setFocusToItem(e.closest(\"li\"))}e.preventDefault()},this.processArrowRightEvent=(e,t)=>{var s,i;\"false\"===(null===(s=this.currentFocus)||void 0===s?void 0:s.getAttribute(\"aria-expanded\"))?this.toggleNode(this.currentFocus,this.currentFocus.id,t):\"true\"===(null===(i=this.currentFocus)||void 0===i?void 0:i.getAttribute(\"aria-expanded\"))&&this.setFocusToNextItem(this.currentFocus),e.preventDefault()},this.handleExpanders=(e,t)=>{const s=e.id.replace(\"expander-\",\"node-group-\"),i=this.tree.querySelector(`#${s}`);if(null!==i){const s=i.parentNode;null!=s&&(this.toggleNode(s,e.id.replace(\"expander-\",\"\"),t),this.setFocusToItem(s))}},this.tree=t,this.treeItems=this.tree.querySelectorAll(\"[role=treeitem]\"),this.currentFocus=null}}class r{constructor(e){this.timeoutId=null,this.initialise=()=>{var e;null===(e=this.filter)||void 0===e||e.addEventListener(\"keyup\",(e=>{e instanceof KeyboardEvent&&this.handleKeyUp(e)})),this.list.addEventListener(\"change\",this.processInputChange);const t=this.getSelectedItems().length,s=this.getVisibleItems().length;this.updateSelectedCount(this.selectedCount,t),this.updateFilteredCount(this.filterCount,t,s)},this.handleKeyUp=e=>{e.stopPropagation(),\"Enter\"!==e.key?(clearTimeout(Number(this.timeoutId)),this.timeoutId=setTimeout(this.processKeyUpTimeout,300)):e.preventDefault()},this.cleanString=e=>(e=(e=(e=e.replace(/&/g,\"and\")).replace(/[’',:–-]/g,\"\")).replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\")).trim().replace(/\\s\\s+/g,\" \").toLowerCase(),this.filterItems=(e,t)=>{const s=this.cleanString(e),i=this.getSelectedItems();let r=0;for(r=0;r<t.length;r++)-1!==this.labels[r].search(s)&&i.push(r);for(r=0;r<t.length;r++)this.list.children[r].classList.add(\"is-hidden\");for(r=0;r<i.length;r++)this.list.children[i[r]].classList.remove(\"is-hidden\")},this.updateSelectedCount=(e,t)=>{e&&(e.textContent=`${t} selected`)},this.updateFilteredCount=(e,t,s)=>{const i=`${s} ${1===s?`${this.config.copySingle}displayed`:`${this.config.copyMultiple}displayed`}, ${t} ${1===t?`${this.config.copySingle}selected`:`${this.config.copyMultiple}selected`}`;e&&(e.innerHTML=i)},this.setupHeight=()=>{const e=this.container.clientHeight,t=this.getAbsoluteHeight(this.list);if(t<e+50)return void(this.container.style.height=t+\"px\");const s=this.getInViewport(this.list.children).pop(),i=s.offsetTop+s.clientHeight/1.5;this.container.style.height=i+\"px\"},this.getAbsoluteHeight=e=>{const t=window.getComputedStyle(e),s=parseFloat(t.marginTop)+parseFloat(t.marginBottom);return Math.ceil(e.offsetHeight+s)},this.isInViewport=e=>{const t=this.container.clientHeight,s=this.container.getBoundingClientRect().top;return e.getBoundingClientRect().top-s<t},this.getInViewport=e=>Array.from(e).filter(this.isInViewport),this.getSelectedItems=()=>{const e=[];return Array.from(this.inputs).forEach(((t,s)=>{1==t.checked&&e.push(s)})),e},this.getVisibleItems=()=>{const e=[];for(let t=0;t<this.list.children.length;t++)!1===this.list.children[t].classList.contains(\"is-hidden\")&&e.push(t);return e},this.processKeyUpTimeout=e=>{this.filterItems(this.filter.value,this.list.children);const t=this.getSelectedItems().length,s=this.getVisibleItems().length;this.updateFilteredCount(this.filterCount,t,s)},this.processInputChange=e=>{const t=this.getSelectedItems().length,s=this.getVisibleItems().length;this.updateSelectedCount(this.selectedCount,t),this.updateFilteredCount(this.filterCount,t,s)},this.container=e.querySelector(\".js-container\"),this.list=e.querySelector(\"ul\"),this.inputs=e.querySelectorAll(\"input[type=checkbox]\"),this.filter=e.querySelector(\"input[type=text]\"),this.filterCount=e.querySelector(\".js-filter-count\"),this.selectedCount=e.querySelector(\".js-selected-count\"),this.config={copySingle:e.dataset.copySingle?`${e.dataset.copySingle} `:\"\",copyMultiple:e.dataset.copyMultiple?`${e.dataset.copyMultiple} `:\"\"},this.labels=[];for(let e=0;e<this.list.children.length;e++)this.labels.push(this.cleanString(this.list.children[e].textContent||\"\"));e.setAttribute(\"data-module-active\",\"true\")}}return s})()));","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { MultiSelectSearch } from \"@nationalarchives/tdr-components\";\nimport { NestedNavigation, InputType } from \"@nationalarchives/tdr-components\";\n\nwindow.addEventListener(\"DOMContentLoaded\", (event) => {\n  /**\n   * Multi-select search.\n   */\n  const multiSelects = document.querySelectorAll(\n    \"[data-module=multi-select-search]\"\n  );\n\n  multiSelects.forEach((ms) => {\n    const multiSelectSearch = new MultiSelectSearch(ms as HTMLElement);\n    multiSelectSearch.initialise();\n  });\n\n  /**\n   * Nested Navigation\n   */\n  const tree = document.querySelector(\"[role=tree]\");\n  if (tree != null) {\n    const nestedNavigation = new NestedNavigation(tree as HTMLUListElement);\n    nestedNavigation.initialiseFormListeners(InputType.radios);\n  }\n});\n"],"names":[],"sourceRoot":""}