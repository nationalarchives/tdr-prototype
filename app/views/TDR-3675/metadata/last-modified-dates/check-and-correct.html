{% extends "layouts/main.html" %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}\
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% import "macros/task-list.html" as taskList %}

{% block pageTitle %}
  Check and correct dates
{% endblock %}

{% block beforeContent %}
  <a href="./" class="govuk-back-link">Back to Last modified dates</a>
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds-from-desktop">
    <span class="govuk-caption-l">Consignment: MOCK-TDR-1294</span>
    <h1 class="govuk-heading-l">Check and correct dates</h1>
    <p class="govuk-body">Check and correct the extracted date last modified for each record.</p>
    <p class="govuk-body">Your progress is saved each time you add a corrected date.</p>
    <a href="./confirm-complete" role="button" draggable="false" class="govuk-button govuk-button--secondary" data-module="govuk-button">
      I have finished checking dates
    </a>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <hr class="govuk-section-break  govuk-section-break--m govuk-section-break--visible">
    <div class="table-controls table-controls--paginate">
      <div class="table-controls__row">
        <form action="?{{data.queryParamsString}}" method="get">
          <div class="table-controls__sort-container">
            {{ govukSelect({
              id: "sort",
              name: "sort",
              classes: "table-controls__sort",
              label: {
                html: "<strong>Sort by</strong>"
              },
              items: [
                {
                  value: "file",
                  text: "File name (A-Z)",
                  selected: ('true' if data.sort == 'file')
                },
                {
                  value: "Directory",
                  text: "Directory (A-Z)",
                  selected: ('true' if data.sort == 'directory')
                }
              ]
            }) }}
            {{ govukButton({
              text: "Sort",
              classes: "table-controls__submit"
            }) }}
          </div>
        </form>
        <div class="table-controls__filters">
          <form action="" method="get">
          {% set filterDirectoryClasses = "autocomplete" %}
          {% include "includes/metadata/filters.html" %}
          </form>
        </div>
      </div>
      {% include "includes/metadata/filteredby.html" %}
      <div class="table-controls__pagination">
        {{ govukPagination({
          previous: {
            href: data['previousPage']
          },
          next: {
            href: data['nextPage']
          },
          items: data['pages']
        }) }}
      </div>
    </div>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    {% set clear_link = ["./check-and-correct?sort=", data.sort]|join  %}
    {% if data.sort == 'directory' %}
    {% include "./summary-table-sort-dir.html" %}
    {% elif data.sort == 'file' %}
    {% include "./summary-table-sort-file.html" %}
    {% endif %}
    <div class="tdr-pagination">
    {{ govukPagination({
      previous: {
        href: data['previousPage']
      },
      next: {
        href: data['nextPage']
      },
      items: data['pages']
    }) }}
    </div>
  </div>
</div>
{% endblock %}

{% block pageScripts %}
  {{ super() }}
{% endblock %}
