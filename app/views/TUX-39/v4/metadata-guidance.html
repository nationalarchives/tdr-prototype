{% extends "layouts/main.html" %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "macros/icon.njk" import daIcon %}

{% block pageTitle %}
  Metadata entry guidance - MOCK-TDR-1294 - Transfer Digital Records
{% endblock %}

{# {% block beforeContent %}
  <a href="./transfer-tasks" class="govuk-back-link">Back to Consignment</a>
{% endblock %} #}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-xl">Metadata guidance</h1>

      <h2 class="da-contents-list__title">
        Contents
      </h2>
      <nav class="da-contents-list govuk-!-margin-bottom-8">
        <ol class="da-contents-list__list">
          <li class="da-contents-list__list-item da-contents-list__list-item--parent">
            <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#intro">Introduction</a>
          </li>
          <li class="da-contents-list__list-item da-contents-list__list-item--parent">
            <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#the-metadata-template">The metadata template</a>
            <ol class="da-contents-list__nested-list">
              <li class="da-contents-list__list-item da-contents-list__list-item--dashed">
                <span aria-hidden="true"></span>
                <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#metadata-we-extract-from-your-records">
                  Metadata we extract from your records</a>
              </li>
              <li class="da-contents-list__list-item da-contents-list__list-item--dashed">
                <span aria-hidden="true"></span>
                <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#columns-with-default-values">Columns with default values</a>
              </li>
            </ol>
          </li>
          <li class="da-contents-list__list-item da-contents-list__list-item--parent">
            <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#completing-the-template">Completing the template</a>
            <ol class="da-contents-list__nested-list da-contents-list__list-item--numbered">
              <li class="da-contents-list__list-item da-contents-list__list-item--dashed">
                <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#check-date-last-modified">
                  <span class="da-contents-list__number">1. </span>
                  <span class="da-contents-list__numbered-text">Check the Date last modified</span>
                </a>
              </li>
              <li class="da-contents-list__list-item da-contents-list__list-item--dashed">
                <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#provide-metadata-about-closed-records">
                  <span class="da-contents-list__number">2. </span>
                  <span class="da-contents-list__numbered-text">Provide metadata about closed records</span>
                </a>
              </li>
              <li class="da-contents-list__list-item da-contents-list__list-item--dashed">
                <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#provide-record-descriptions">
                  <span class="da-contents-list__number">3. </span>
                  <span class="da-contents-list__numbered-text">Provide record descriptions</span>
                </a>
              </li>
              <li class="da-contents-list__list-item da-contents-list__list-item--dashed">
                <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#change-the-record-language">
                  <span class="da-contents-list__number">4. </span>
                  <span class="da-contents-list__numbered-text">Change the record language</span>
                </a>
              </li>
              <li class="da-contents-list__list-item da-contents-list__list-item--dashed">
                <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#other-metadata-fields">
                  <span class="da-contents-list__number">5. </span>
                  <span class="da-contents-list__numbered-text">Other metadata fields</span>
                </a>
              </li>
            </ol>
          </li>
          <li class="da-contents-list__list-item da-contents-list__list-item--parent">
            <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#uploading-the-spreadsheet">Uploading the metadata spreadsheet
            </a>
            <ol class="da-contents-list__nested-list">
              <li class="da-contents-list__list-item da-contents-list__list-item--dashed">
                <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#export-the-template-csv">
                  <span class="da-contents-list__numbered-text">Export the template as a CSV (UTF-8) for upload</span>
                </a>
              </li>
            </ol>
          </li>
          <li class="da-contents-list__list-item da-contents-list__list-item--parent">
            <a class="da-contents-list__link govuk-link govuk-link--no-underline" href="#metadata-that-doesnt-fit">Providing metadata that doesn't fit the template</a>
          </li>
        </ol>
      </nav>


      <h2 class="govuk-heading-l" id="intro">Introduction</h2>

      <p class="govuk-body">As part of a digital transfer to The National Archives your consignment of records must be transferred with metadata to assist preservation. Metadata is added to your consignment by uploading a spreadsheet.</p>
       
      <p class="govuk-body">We provide a downloadable Excel template for entering metadata. It contains some pre-populated metadata, which was either extracted from your records or set by default.</p>
      
      <p class="govuk-body">You need to check the pre-populated metadata and make amendments where appropriate. For example, see the section below on <a href="#check-date-last-modified" class="govuk-link">checking the extracted date last modified</a>.</p>
      
      <div class="da-alert da-alert--error da-alert--with-icon">
        <div class="da-alert__icon">
          <div aria-hidden="true">
            {{- daIcon({"iconType": 'warning', iconSize: "xl"})-}}
          </div>
        </div>
        <div class="da-alert__content">
          <h2 class="da-alert__heading da-alert__heading--s">You must provide metadata for closed records</h2>
          <p>If you have closed records in your consignment you must provide closed record metadata about those records.
          See the section below on <a class="govuk-link" href="#provide-metadata-about-closed-records">providing closed record metadata</a>.</p>        
        </div>
      </div>
      
      <p class="govuk-body">Any additional metadata you can provide in the available columns helps us to preserve and enrich the records, making it easier to find in our public catalogue.</p>

      <h2 class="govuk-heading-l" id="the-metadata-template">The metadata template</h2>

      <p class="govuk-body">Transfer Digital Records will generate a template containing a row for every uploaded record and some columns with pre-populated metadata extracted from your records. There are other columns available to provide closed record metadata and additional metadata for each record.</p>
      
      <p class="govuk-body">You can download the template after you have uploaded records.</p>

      <h3 class="govuk-heading-m" id="metadata-we-extract-from-your-records">Metadata we extract from your records</h3>
      
      <p class="govuk-body">The template will contain the following columns with pre-populated metadata extrated from your records during upload:</p>

      <ul class="govuk-list govuk-list--bullet">
        <li>File name</li>
        <li>File path</li>
        <li>Date last modified</li>
      </ul>

      {{ govukWarningText({
        html: "These columns must not be edited.",
        iconFallbackText: "Warning"
      }) }}
      
      <p class="govuk-body">If the <em>Date last modified</em> field is not accurate there is <a href='#check-date-last-modified' class="govuk-link">another column for providing date metadata</a>.</p>

      <h3 id="columns-with-default-values" class="govuk-heading-m">Columns with default values</h3>
      <p class="govuk-body">The template will contain some columns with pre-populated default values.</p>

      {{ govukTable({
        caption: "",
        captionClasses: "govuk-table__caption--m",
        firstCellIsHeader: false,
        head: [
          {
            text: "Column name"
          },
          {
            text: "Default value"
          }
        ],
        rows: [
          [
            {
              text: "Language"
            },
            {
              text: "English"
            }
          ],
          [
            {
              text: "Needs alternative title"
            },
            {
              text: "No"
            }
          ],
          [
            {
              text: "Needs alternative description"
            },
            {
              text: "No"
            }
          ]
        ]
      }) }}
       
      <div class="da-alert da-alert--info da-alert--with-icon">
        <div class="da-alert__content">
          <p>
            Unlike the <a href="#metadata-we-extract-from-your-records">metadata we extract from your records</a>, these columns can be edited.
          </p>
        </div>
      </div>

      <h2 id="completing-the-template" class="govuk-heading-l">Completing the template</h2>
      <p class="govuk-body">The template opens in Microsoft Excel and contains columns with prepopulated metadata and empty columns for you to provide metadata.</p>

      <p class="govuk-body">See a <a class="govuk-link" href="">full list of metadata column titles and descriptions</a>.</p>
      
      <p class="govuk-body">Before uploading the metadata template, you must check the metadata we extracted, check the pre-populated columns and provide closed record metadata and additional metadata for each record.</p>

      <p class="govuk-body">Below is a step-by-step guide to completing the template.</p>

      <h3 id="check-date-last-modified" class="govuk-heading-m">1. Check the <em>Date last modified</em> column</h3> 
      <p class="govuk-body">The <em>Date last modified</em> column was populated with values extracted from the records. Check that the date represents the last meaningful change to the record.</p>

      {{ govukWarningText({
        html: "The <em>Date last modified</em> column must not be edited directly.",
        iconFallbackText: "Warning"
      }) }}

      <p class="govuk-body">If you need to enter a different record date use the <em>Date of the record</em> column.</p>
      <p class="govuk-body">The <em>Date last modified</em> or, if provided, the <em>Date of the record</em> value will be used as the closure start date for a closed record. See the next section on <a href="#provide-metadata-about-closed-records">providing closed record metadata</a> for more information.</p>

      <h3 id="provide-metadata-about-closed-records" class="govuk-heading-m">2. Provide metadata about closed records</h3> 
      <p class="govuk-body">If you have closed records in your consignment <strong>you must provide metadata about those closed records</strong>. The following columns are mandatory for every closed record.</p>
    </div>
  </div>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">


      <table class="govuk-table">
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header">Column</th>
            <th scope="col" class="govuk-table__header">Value</th>
            <th scope="col" class="govuk-table__header govuk-!-width-one-quarter">Example</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Closure status</td>
            <td class="govuk-table__cell"><pre style='margin:0'>yes / no</pre></td>
            <td class="govuk-table__cell"><pre style='margin:0'>yes</pre></td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">FOI Decision Asserted</td>
            <td class="govuk-table__cell">Date</td>
            <td class="govuk-table__cell"><pre style='margin:0'>2024-08-14</pre></td>
          </tr>          
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">FOI Exemption Code <a href='#fn1-text' class='footnote-symbol' id='fn1-symbol' aria-describedby='fn1-text'>&#x2020;</a></td>
            <td class="govuk-table__cell">One or more comma separated codes</td>
            <td class="govuk-table__cell"><pre style='margin:0'>22A, 23</pre></td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Date last modified <em>OR</em> Date of the record <a href='#fn2-text' class='footnote-symbol' id='fn2-symbol' aria-describedby='fn2-text'>&#x2020;&#x2020;</a></td>
            <td class="govuk-table__cell">Date</td>
            <td class="govuk-table__cell"><pre style='margin:0'>1999-03-23</pre></td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Closure period</td>
            <td class="govuk-table__cell">Date</td>
            <td class="govuk-table__cell"><pre style='margin:0'>80</pre></td>
          </tr>
        </tbody>
        <caption>
          <div>
            <p class="footnote-text" id="fn1-text" role="note">
                <a class="footnote-text__link" href="#fn1-symbol">Footnote &#x2020;:</a> For more information see this full list of <a  href="https://www.legislation.gov.uk/ukpga/2000/36/contents" class="govuk-link">FOI Exemption codes and their designated exemptions</a>.
            </p>
            <p class="footnote-text" id="fn2-text" role="note">
                <a class="footnote-text__link" href="#fn2-symbol">Footnote &#x2020;&#x2020;:</a> If <em>Date of the record</em> is provided it will be used to indicate the closure start date. If <em>Date of the record</em> is not provided <em>Date last modified</em> will be used.
            </p>
        </div>
        </caption>
      </table>
    </div>
  </div>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <h4 id="optional-closed-record-metadata" class="govuk-heading-s">Optional closed record metadata</h4> 
      <p class="govuk-body">The template contains the following optional fields for closed records. </p>
    </div>
  </div>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <table class="govuk-table">
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header">Column</th>
            <th scope="col" class="govuk-table__header">Value</th>
            <th scope="col" class="govuk-table__header govuk-!-width-one-quarter">Example</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Alternative file name</td>
            <td class="govuk-table__cell">A file name excluding the file extension, which will be visible to the public during the closure period.</td>
            <td class="govuk-table__cell"><pre style='margin:0;white-space: normal;'>Sentencing remark [withheld] case number 78365</pre></td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Alternative description</td>
            <td class="govuk-table__cell">
              A description, which will be visible to the public during the closure period.
            </td>
            <td class="govuk-table__cell">
              <pre style='margin:0; white-space: normal;'>Lorem ipsum dolor sit amet, [withheld]. Donec fringilla pretium nunc eget tempus.</pre>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">


      <h3 id="provide-record-descriptions" class="govuk-heading-m">3. Provide record descriptions</h3> 
      <p>Whenever possible provide additional descriptive information about the record in the <em>Description</em> column. For example, if the file name is not descriptive.</p>
      <div class="da-alert da-alert--info da-alert--with-icon">
        <div class="da-alert__icon">
          <div aria-hidden="true">
            {{- daIcon({"iconType": 'search', iconSize: "xl"})-}}
          </div>
        </div>
        <div class="da-alert__content">
          <h2 class="da-alert__heading da-alert__heading--s">We strongly encourage additional  descriptions</h2>
          <p>Any descriptive metadata you provide helps to enrich the record, making it easier to find in our public catalogue.</p>
          <p>If you have metadata you would like to include with the metadata field title, you can ask for advice from a Transfer Advisor at <a href="mailto:tdr@nationalarchives.gov.uk">tdr@nationalarchives.gov.uk</a>.</p>
        </div>
      </div>

      <h3 id="change-the-record-language" class="govuk-heading-m">4. Change the record language</h3> 
      <p class="govuk-body">The template includes a <em>Language</em> field that is set to English by default.</p>
      <p class="govuk-body">We currently only accept 'English' and 'Welsh' in this column. If the consignment contains a record that has Welsh as its main language change the metadata field.</p>
      
      <h3 id="other-metadata-fields" class="govuk-heading-m">5. Other metadata fields</h3> 
      <p class="govuk-body">The template also includes column headers for additional metadata, such as <em>Former reference</em> and <em>Translated title of the record</em>.</p>

      {# <h2 id="export-the-template-csv" class="govuk-heading-l">Export the template as a CSV for upload</h2> 
      <p class="govuk-body">Once you have completed the template you will need to export a file in the <abbr title="Comma Seperated Values">CSV</abbr> format before uploading it. You can do this within Excel following <a target="_blank" href="https://support.microsoft.com/en-gb/office/save-a-workbook-to-text-format-txt-or-csv-3e9a9d6c-70da-4255-aa28-fcacf1f081e6">guidance from Microsoft (opens in a new tab)</a>.</p> #}
      
      <h2 id="uploading-the-spreadsheet" class="govuk-heading-l">Uploading the metadata spreadsheet</h2> 

      <p>Once you have completed your metadata spreadsheet you will be able to upload it through Transfer Digital Records.</p>

      <p>In order for us to process your metadata upload it must include the following unedited columns that were provided in the downloadable template:</p>
      <ul class="govuk-list govuk-list--bullet">
        <li>File name</li>
        <li>File path</li>
        <li>Date last modified</li>
      </ul>
      
      <p>Any other metadata you provide is associated with the records using the <em>File name</em> and <em>File path</em>.</p>
      <p>The <em>Date last modified</em> should not be edited directly. If a date is not accurate follow the guidance <a href="metadata-guidance#check-date-last-modified">to provide a different date for a record</a>.</p>

      <h3 id="export-the-template-csv" class="govuk-heading-m">Export the template as a CSV (UTF-8) for upload</h3> 

      <p class="govuk-body">Once you have completed the template you will need to export a file in the <abbr title="Comma Seperated Values">CSV UTF-8</abbr> format before uploading it.</p>
      
      <p class="govuk-body">
        <img style="max-width: 100%; height: auto" src="/public/images/saveas-csvutf8.png" />
        <span class="govuk-hint"><a target="blank" href="/public/images/saveas-csvutf8.png">Open larger version of image in new tab</a></span>
      </p>

      {# You can do this within Excel following <a target="_blank" href="https://support.microsoft.com/en-gb/office/save-a-workbook-to-text-format-txt-or-csv-3e9a9d6c-70da-4255-aa28-fcacf1f081e6">guidance from Microsoft (opens in a new tab)</a>. #}

      <h2 id="metadata-that-doesnt-fit" class="govuk-heading-l">Providing metadata that doesn't fit the template</h2> 
      <p class="govuk-body">If you have metadata that you would like to provide but it doesn't fit into the provided template columns, contact <a href="mailto:tdr@nationalarchives.gov.uk">tdr@nationalarchives.gov.uk</a> to speak to a Transfer Advisor.</p>
    </div>
  </div>

{% endblock %}
